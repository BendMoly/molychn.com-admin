{"version":3,"sources":["webpack:///./src/utils/dom.js","webpack:///src/views/release/index.vue","webpack:///./src/views/release/index.vue?1967","webpack:///./src/views/release/index.vue"],"names":["isServer","prototype","$isServer","on","document","addEventListener","element","event","handler","attachEvent","off","removeEventListener","detachEvent","release","mounted","this","fetchColumns","data","columns","column","columnName","tags","tagOptions","title","abstract","markdown","qiniuToken","uploadData","type","images_source","src","name","sourceIdx","reference","moveIn","methods","checkEditStatus","_this","id","$route","query","$http","get","then","res","i","length","columnId","_id","content","_this2","handleSelect","filter","item","sendArticle","_this3","normalizeData","post","$message","message","getQiniuToken","file","_this4","token","beforeUpload","_this5","promise_default","a","resolve","reject","key","fname","console","log","setTimeout","Error","successUpload","$refs","uploadForm","clearFiles","showSource","handleDocumentClick","showSourceToggle","sourceSlt","idx","sourceDel","_this6","$confirm","confirmButtonText","cancelButtonText","catch","e","imgSource","$el","contains","target","destroyed","views_release","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","gutter","span","_v","placeholder","change","model","value","callback","$$v","expression","_l","label","multiple","filterable","allow-create","default-first-option","readonly","slot","click","$event","stopPropagation","ishljs","codeStyle","scrollStyle","ref","class","folder-images_move","index","directives","rawName","drag","action","before-upload","on-success","size","angle-rotate-box","angle-rotate","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/3.cfea011afb0290059cf7.js","sourcesContent":["/* eslint-disable */\n/* istanbul ignore next */\n\nimport Vue from 'vue'\n\nconst isServer = Vue.prototype.$isServer\n\n/* istanbul ignore next */\nexport const on = (function () {\n  if (!isServer && document.addEventListener) {\n    return function (element, event, handler) {\n      if (element && event && handler) {\n        element.addEventListener(event, handler, false)\n      }\n    }\n  } else {\n    return function (element, event, handler) {\n      if (element && event && handler) {\n        element.attachEvent('on' + event, handler)\n      }\n    }\n  }\n})()\n\n/* istanbul ignore next */\nexport const off = (function () {\n  if (!isServer && document.removeEventListener) {\n    return function (element, event, handler) {\n      if (element && event) {\n        element.removeEventListener(event, handler, false)\n      }\n    }\n  } else {\n    return function (element, event, handler) {\n      if (element && event) {\n        element.detachEvent('on' + event, handler)\n      }\n    }\n  }\n})()\n\n/* istanbul ignore next */\nexport const once = function (el, event, fn) {\n  var listener = function () {\n    if (fn) {\n      fn.apply(this, arguments)\n    }\n    off(el, event, listener)\n  }\n  on(el, event, listener)\n}\n\n/* istanbul ignore next */\nexport function hasClass (el, cls) {\n  if (!el || !cls) return false\n  if (cls.indexOf(' ') !== -1) throw new Error('className should not contain space.')\n  if (el.classList) {\n    return el.classList.contains(cls)\n  } else {\n    return (' ' + el.className + ' ').indexOf(' ' + cls + ' ') > -1\n  }\n}\n\n/* istanbul ignore next */\nexport function addClass (el, cls) {\n  if (!el) return\n  var curClass = el.className\n  var classes = (cls || '').split(' ')\n\n  for (var i = 0, j = classes.length; i < j; i++) {\n    var clsName = classes[i]\n    if (!clsName) continue\n\n    if (el.classList) {\n      el.classList.add(clsName)\n    } else if (!hasClass(el, clsName)) {\n      curClass += ' ' + clsName\n    }\n  }\n  if (!el.classList) {\n    el.className = curClass\n  }\n};\n\n/* istanbul ignore next */\nexport function removeClass (el, cls) {\n  if (!el || !cls) return\n  var classes = cls.split(' ')\n  var curClass = ' ' + el.className + ' '\n\n  for (var i = 0, j = classes.length; i < j; i++) {\n    var clsName = classes[i]\n    if (!clsName) continue\n\n    if (el.classList) {\n      el.classList.remove(clsName)\n    } else if (hasClass(el, clsName)) {\n      curClass = curClass.replace(' ' + clsName + ' ', ' ')\n    }\n  }\n  if (!el.classList) {\n    el.className = trim(curClass)\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/dom.js","<template>\n  <section class=\"release-container\">\n    <div class=\"release-items\">\n      <el-row :gutter=\"20\">\n        <el-col :span=\"2\"><label>栏目：</label></el-col>\n        <el-col :span=\"8\">\n          <el-select v-model=\"column\" placeholder=\"请选择\" @change=\"handleSelect\">\n            <el-option\n              v-for=\"item in columns\"\n              :key=\"item._id\"\n              :label=\"item.title\"\n              :value=\"item._id\">\n            </el-option>\n          </el-select>\n        </el-col>\n        <el-col :span=\"2\"><label>标签：</label></el-col>\n        <el-col :span=\"12\">\n          <el-select\n          v-model=\"tags\"\n          multiple\n          filterable\n          allow-create\n          default-first-option\n          placeholder=\"请选择文章标签\">\n            <el-option\n              v-for=\"item in tagOptions\"\n              :key=\"item\"\n              :label=\"item\"\n              :value=\"item\">\n            </el-option>\n          </el-select>\n        </el-col>\n        <el-col :span=\"2\"><label>标题：</label></el-col>\n        <el-col :span=\"22\">\n          <el-input v-model=\"title\"></el-input>\n        </el-col>\n        <el-col :span=\"2\"><label>摘要：</label></el-col>\n        <el-col :span=\"22\">\n          <el-input type=\"textarea\" v-model=\"abstract\"></el-input>\n        </el-col>\n      </el-row>\n      <el-input placeholder=\"光秃秃去给人看，你愿意么\" readonly>\n        <template slot=\"prepend\">\n          <el-button type=\"primary\" @click.stop=\"showSource\">来一张封面图？</el-button>\n        </template>\n      </el-input>\n    </div>\n    <mavon-editor v-model=\"markdown\" :ishljs=\"true\" codeStyle=\"xcode\" :scrollStyle=\"true\"/>\n    <div class=\"release-btn\">\n      <el-button><i class=\"fa fa-folder-open\"></i>存入草稿箱</el-button>\n      <el-button type=\"primary\" @click=\"sendArticle\"><i class=\"fa fa-send\"></i>发表</el-button>\n    </div>\n    <div class=\"folder-images\" ref=\"imgSource\" :class=\"{'folder-images_move': moveIn}\">\n      <div class=\"folder-images_title\">图片素材</div>\n      <div class=\"folder-images_types\">\n        <el-radio-group v-model=\"type\">\n          <el-radio label=\"all\">全部</el-radio>\n          <el-radio label=\"banner\">封面</el-radio>\n        </el-radio-group>\n      </div>\n      <div class=\"folder-images_list area-scroll\">\n        <el-row>\n          <el-col\n          :span=\"24\"\n          v-for=\"(item, index) in images_source\"\n          :key=\"index\"\n          >\n            <div class=\"folder-images_items\" @click=\"sourceSlt(index)\">\n              <i class=\"fa fa-close folder-images_items_close\" @click.stop=\"sourceDel(item)\"></i>\n              <div class=\"folder-images_item_selected\" v-show=\"sourceIdx == index\"><i class=\"fa fa-check-circle-o\"></i></div>\n            </div>\n          </el-col>\n        </el-row>\n        <el-upload\n          ref=\"uploadForm\"\n          drag\n          action=\"http://upload.qiniup.com\"\n          :data=\"uploadData\"\n          :before-upload=\"beforeUpload\"\n          :on-success=\"successUpload\"\n          multiple>\n          <i class=\"el-icon-upload\"></i>\n          <div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\n        </el-upload>\n      </div>\n      <div class=\"folder-images_source\">\n        <el-row>\n          <el-col :span=\"24\">\n            <el-input size=\"mini\" placeholder=\"图片名\" readonly></el-input>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-input size=\"mini\" placeholder=\"线上地址\" readonly></el-input>\n          </el-col>\n        </el-row>\n        <el-button type=\"primary\" size=\"small\" class=\"folder-images_source_btn\">就决定是你了</el-button>\n      </div>\n      <div class=\"folder-images_toggle\" @click.stop=\"showSourceToggle\">\n        <div :class=\"{'angle-rotate-box': moveIn}\">\n          <i class=\"fa fa-angle-left\" :class=\"{'angle-rotate': moveIn}\"></i>\n        </div>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script>\nimport { on, off } from '@/utils/dom'\nexport default {\n  mounted () {\n    this.fetchColumns()\n  },\n  data () {\n    return {\n      columns: [],\n      column: '',\n      columnName: '',\n      tags: [],\n      tagOptions: [],\n      title: '',\n      abstract: '',\n      markdown: '',\n      qiniuToken: '',\n      uploadData: null,\n      type: 'all',\n      images_source: [\n        {\n          src: '',\n          name: '',\n          type: 0\n        }\n      ],\n      sourceIdx: -1,\n      reference: null,\n      moveIn: false\n    }\n  },\n  methods: {\n    // 判断是编辑还是发布\n    checkEditStatus () {\n      let id = this.$route.query.id\n      if (id && typeof id === 'string') {\n        this.$http.get(`/articles/${id}`).then(res => {\n          for (let i = 0; i < this.columns.length; i++) {\n            if (res.data.columnId === this.columns[i]._id) {\n              this.column = this.columns[i].title\n              this.tagOptions = this.columns[i].tags\n            }\n          }\n          this.tags = res.data.tags\n          this.title = res.data.title\n          this.abstract = res.data.abstract\n          this.markdown = res.data.content\n        })\n      }\n    },\n    fetchColumns () {\n      this.$http.get('/columns').then(res => {\n        this.columns = res.data\n        this.checkEditStatus()\n      })\n    },\n    handleSelect (id) {\n      let res = this.columns.filter((item) => {\n        return item._id === id\n      })\n      this.tagOptions = res[0].tags\n      this.columnName = res[0].title\n    },\n    sendArticle () {\n      let normalizeData = {\n        title: this.title,\n        abstract: this.abstract,\n        columnId: this.column,\n        columnName: this.columnName,\n        tags: this.tags,\n        content: this.markdown\n      }\n      this.$http.post('/articles', normalizeData).then(res => {\n        this.$message({\n          type: 'success',\n          message: '发表成功'\n        })\n      })\n    },\n    // 素材上传操作\n    getQiniuToken (file) {\n      this.$http.get('/upload').then(res => {\n        this.qiniuToken = res.data\n        this.uploadData = {\n          token: res.data\n        }\n      })\n    },\n    beforeUpload (file) {\n      return new Promise((resolve, reject) => {\n        this.uploadData = {\n          token: this.qiniuToken,\n          key: file.name,\n          fname: file.name\n        }\n        if (this.uploadData.fname) {\n          console.log(this.uploadData)\n          setTimeout(() => {\n            resolve(true)\n          }, 200)\n        } else {\n          reject(new Error('the fname is empty'))\n        }\n      })\n    },\n    successUpload () {\n      this.$refs.uploadForm.clearFiles()\n    },\n    showSource () {\n      this.moveIn = true\n      this.getQiniuToken()\n      on(document, 'click', this.handleDocumentClick)\n    },\n    showSourceToggle () {\n      this.moveIn = !this.moveIn\n      if (this.moveIn) {\n        this.getQiniuToken()\n        on(document, 'click', this.handleDocumentClick)\n      } else {\n        off(document, 'click', this.handleDocumentClick)\n      }\n    },\n    sourceSlt (idx) {\n      console.log(idx)\n      this.sourceIdx = idx\n    },\n    sourceDel (item) {\n      console.log(item)\n      this.$confirm('确定删除该素材?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.$message({\n          type: 'success',\n          message: '删除成功!'\n        })\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '已取消删除'\n        })\n      })\n    },\n    handleDocumentClick (e) {\n      let reference = this.$refs.imgSource\n      if (!this.$el ||\n        !reference ||\n        reference.contains(e.target)) return\n      this.moveIn = false\n      console.log(1)\n      off(document, 'click', this.handleDocumentClick)\n    }\n  },\n  destroyed () {\n    off(document, 'click', this.handleDocumentClick)\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../../styles/default.scss';\n.el-col{\n  margin-bottom: 10px;\n}\n.release-items{\n  margin-bottom: 20px;\n}\n.el-autocomplete,\n.el-select{\n  width: 100%;\n}\n.release-btn{\n  margin-top: 20px;\n  text-align: right;\n  i{\n    margin-right: 5px;\n  }\n}\n.folder-images{\n  position: fixed;\n  top: 0;\n  right: -300px;\n  bottom: 0;\n  z-index: 1600;\n  width: 300px;\n  background: #ffffff;\n  border-left: 1px solid #ebebeb;\n  transition: .5s;\n}\n.folder-images_move{\n  right: 0;\n}\n.folder-images_title{\n  padding-left: 10px;\n  height: 40px;\n  line-height: 40px;\n  border-bottom: 1px dashed #ebebeb;\n}\n.folder-images_types{\n  padding-left: 10px;\n  height: 22px;\n}\n.folder-images_list{\n  position: absolute;\n  top: 65px;\n  bottom: 130px;\n  padding-top: 10px;\n  width: 100%;\n  overflow: auto;\n}\n// .folder-images_list::-webkit-scrollbar {\n//   width: 6px;\n//   height: 1px;\n// }\n// .folder-images_list::-webkit-scrollbar-thumb {/*滚动条里面小方块*/\n//   border-radius: 6px;\n//   background: #ccc;\n// }\n// .folder-images_list::-webkit-scrollbar-track {/*滚动条里面轨道*/\n//   border-radius: 6px;\n//   background: #fff;\n// }\n.folder-images_items{\n  position: relative;\n  // width: 100%;\n  margin: 0 10px;\n  min-height: 100px;\n  border: 1px solid #ebebeb;\n  border-radius: 4px;\n  // overflow: hidden;\n  cursor: pointer;\n}\n.folder-images_items:hover .folder-images_items_close{\n  visibility: visible;\n}\n.folder-images_items_close{\n  visibility: hidden;\n  position: absolute;\n  top: 0;\n  left: 2px;\n  z-index: 2;\n  color: #ec4444;\n}\n.folder-images_item_selected{\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 1;\n  background: rgba(101, 101, 101, .1);\n  i{\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    font-size: 40px;\n    color: $default_color;\n  }\n}\n.folder-images_source{\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  padding: 10px;\n  height: 110px;\n  background: #ffffff;\n  border-top: 1px solid #ebebeb;\n}\n\n.folder-images_source_btn{\n  width: 100%;\n}\n.folder-images_toggle{\n  position: absolute;\n  top: 50%;\n  left: -22px;\n  transform: translateY(-50%);\n  width: 20px;\n  height: 40px;\n  border-top: 1px solid #ebebeb;\n  border-right: 1px solid #ffffff;\n  border-bottom: 1px solid #ebebeb;\n  border-left: 1px solid #ebebeb;\n  border-radius: 50px 0px 0 50px;\n  background: #ffffff;\n  line-height: 38px;\n  font-size: 30px;\n  color: #999;\n  div{\n    margin-left: 5px;\n  }\n  i{\n    transition: .5s;\n  }\n}\n.angle-rotate-box{\n  margin-left: 9px !important;\n}\n.angle-rotate{\n  transform: rotate(180deg);\n  transform-origin: 50% 50%;\n  margin-top: 6px;\n}\n.folder-images_toggle:hover{\n  color: $default_color;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/release/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"release-container\"},[_c('div',{staticClass:\"release-items\"},[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":2}},[_c('label',[_vm._v(\"栏目：\")])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":8}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},on:{\"change\":_vm.handleSelect},model:{value:(_vm.column),callback:function ($$v) {_vm.column=$$v},expression:\"column\"}},_vm._l((_vm.columns),function(item){return _c('el-option',{key:item._id,attrs:{\"label\":item.title,\"value\":item._id}})}))],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":2}},[_c('label',[_vm._v(\"标签：\")])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":12}},[_c('el-select',{attrs:{\"multiple\":\"\",\"filterable\":\"\",\"allow-create\":\"\",\"default-first-option\":\"\",\"placeholder\":\"请选择文章标签\"},model:{value:(_vm.tags),callback:function ($$v) {_vm.tags=$$v},expression:\"tags\"}},_vm._l((_vm.tagOptions),function(item){return _c('el-option',{key:item,attrs:{\"label\":item,\"value\":item}})}))],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":2}},[_c('label',[_vm._v(\"标题：\")])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":22}},[_c('el-input',{model:{value:(_vm.title),callback:function ($$v) {_vm.title=$$v},expression:\"title\"}})],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":2}},[_c('label',[_vm._v(\"摘要：\")])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":22}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.abstract),callback:function ($$v) {_vm.abstract=$$v},expression:\"abstract\"}})],1)],1),_vm._v(\" \"),_c('el-input',{attrs:{\"placeholder\":\"光秃秃去给人看，你愿意么\",\"readonly\":\"\"}},[_c('template',{slot:\"prepend\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.showSource($event)}}},[_vm._v(\"来一张封面图？\")])],1)],2)],1),_vm._v(\" \"),_c('mavon-editor',{attrs:{\"ishljs\":true,\"codeStyle\":\"xcode\",\"scrollStyle\":true},model:{value:(_vm.markdown),callback:function ($$v) {_vm.markdown=$$v},expression:\"markdown\"}}),_vm._v(\" \"),_c('div',{staticClass:\"release-btn\"},[_c('el-button',[_c('i',{staticClass:\"fa fa-folder-open\"}),_vm._v(\"存入草稿箱\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.sendArticle}},[_c('i',{staticClass:\"fa fa-send\"}),_vm._v(\"发表\")])],1),_vm._v(\" \"),_c('div',{ref:\"imgSource\",staticClass:\"folder-images\",class:{'folder-images_move': _vm.moveIn}},[_c('div',{staticClass:\"folder-images_title\"},[_vm._v(\"图片素材\")]),_vm._v(\" \"),_c('div',{staticClass:\"folder-images_types\"},[_c('el-radio-group',{model:{value:(_vm.type),callback:function ($$v) {_vm.type=$$v},expression:\"type\"}},[_c('el-radio',{attrs:{\"label\":\"all\"}},[_vm._v(\"全部\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":\"banner\"}},[_vm._v(\"封面\")])],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"folder-images_list area-scroll\"},[_c('el-row',_vm._l((_vm.images_source),function(item,index){return _c('el-col',{key:index,attrs:{\"span\":24}},[_c('div',{staticClass:\"folder-images_items\",on:{\"click\":function($event){_vm.sourceSlt(index)}}},[_c('i',{staticClass:\"fa fa-close folder-images_items_close\",on:{\"click\":function($event){$event.stopPropagation();_vm.sourceDel(item)}}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.sourceIdx == index),expression:\"sourceIdx == index\"}],staticClass:\"folder-images_item_selected\"},[_c('i',{staticClass:\"fa fa-check-circle-o\"})])])])})),_vm._v(\" \"),_c('el-upload',{ref:\"uploadForm\",attrs:{\"drag\":\"\",\"action\":\"http://upload.qiniup.com\",\"data\":_vm.uploadData,\"before-upload\":_vm.beforeUpload,\"on-success\":_vm.successUpload,\"multiple\":\"\"}},[_c('i',{staticClass:\"el-icon-upload\"}),_vm._v(\" \"),_c('div',{staticClass:\"el-upload__text\"},[_vm._v(\"将文件拖到此处，或\"),_c('em',[_vm._v(\"点击上传\")])])])],1),_vm._v(\" \"),_c('div',{staticClass:\"folder-images_source\"},[_c('el-row',[_c('el-col',{attrs:{\"span\":24}},[_c('el-input',{attrs:{\"size\":\"mini\",\"placeholder\":\"图片名\",\"readonly\":\"\"}})],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":24}},[_c('el-input',{attrs:{\"size\":\"mini\",\"placeholder\":\"线上地址\",\"readonly\":\"\"}})],1)],1),_vm._v(\" \"),_c('el-button',{staticClass:\"folder-images_source_btn\",attrs:{\"type\":\"primary\",\"size\":\"small\"}},[_vm._v(\"就决定是你了\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"folder-images_toggle\",on:{\"click\":function($event){$event.stopPropagation();return _vm.showSourceToggle($event)}}},[_c('div',{class:{'angle-rotate-box': _vm.moveIn}},[_c('i',{staticClass:\"fa fa-angle-left\",class:{'angle-rotate': _vm.moveIn}})])])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1f5f699c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/release/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1f5f699c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1f5f699c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1f5f699c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/release/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}