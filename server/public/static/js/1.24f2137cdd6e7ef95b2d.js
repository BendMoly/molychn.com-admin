webpackJsonp([1],{YVzU:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={mounted:function(){this.fetchData()},data:function(){return{date:null,keys:"",dateRange:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-6048e5),t.$emit("pick",[n,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-2592e6),t.$emit("pick",[n,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-7776e6),t.$emit("pick",[n,e])}}]},articles:[],currentPage:1,count:0,pageSize:10}},methods:{handleCurrentChange:function(t){this.currentPage=t,this.fetchData()},searchData:function(){(this.date||this.keys)&&(this.reset(),this.fetchData())},searchClean:function(){this.date=null,this.keys="",this.fetchData()},handleEdit:function(t){this.$router.push({path:"/release",query:{id:t._id}})},handleDelete:function(t){var e=this;this.$confirm("确定删除'"+t._id+"'？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http.delete("/articles/"+t._id).then(function(t){e.$message({type:"success",message:"删除成功"}),e.fetchData()})}).catch(function(){e.$message({type:"info",message:"珍惜每一篇文章"})})},fetchData:function(){var t=this,e={current:this.currentPage,pagesize:Number(this.pageSize)};this.date&&(e.start=this.date[0],e.end=this.date[1]),this.keys&&(e.keys=this.keys),this.$http.get("/articles",e).then(function(e){console.log(e),t.articles=e.data.items,t.currentPage=e.data.current,t.count=e.data.count})},reset:function(){this.currentPage=1,this.count=0}}},i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"content-container"},[n("div",{staticClass:"content-searchspace"},[n("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",editable:!1,"picker-options":t.dateRange,format:"yyyy / MM / dd ","value-format":"timestamp"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),t._v(" "),n("el-input",{staticClass:"content-keys",attrs:{placeholder:"输入标题关键字"},model:{value:t.keys,callback:function(e){t.keys=e},expression:"keys"}}),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.searchData}},[t._v("给朕找来")]),t._v(" "),n("el-button",{attrs:{type:"warning"},on:{click:t.searchClean}},[t._v("不用侍寝")])],1),t._v(" "),n("div",{staticClass:"content-list"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.articles}},[n("el-table-column",{attrs:{label:"日期",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("timeFormat")(e.row.date))+"\n        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"标题"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.title)+"\n        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){t.handleEdit(e.row)}}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){t.handleDelete(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),n("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,layout:"total, prev, pager, next",total:t.count},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)])},staticRenderFns:[]};var s=n("VU/8")(a,i,!1,function(t){n("jOuU")},"data-v-21dd5b8c",null);e.default=s.exports},jOuU:function(t,e){}});
//# sourceMappingURL=1.24f2137cdd6e7ef95b2d.js.map