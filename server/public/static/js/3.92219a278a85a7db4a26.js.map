{"version":3,"sources":["webpack:///./src/utils/dom.js","webpack:///src/views/release/index.vue","webpack:///./src/views/release/index.vue?9882","webpack:///./src/views/release/index.vue"],"names":["isServer","Vue","prototype","$isServer","on","document","addEventListener","element","event","handler","attachEvent","off","removeEventListener","detachEvent","release","mounted","this","fetchColumns","fetchSource","data","columns","column","columnName","tags","tagOptions","title","abstract","banner","markdown","qiniuToken","uploadData","reference","moveIn","type","images_source","images_source_backup","sourceIdx","imgName","imgSrc","methods","checkEditStatus","_this","id","$route","query","$http","get","then","res","i","length","columnId","_id","content","_this2","handleSelect","filter","item","sendArticle","_this3","normalizeData","post","$message","message","getQiniuToken","_this4","promise_default","a","resolve","reject","catch","err","beforeUpload","file","_this5","token","key","name","fname","setTimeout","successUpload","console","log","$refs","uploadForm","clearFiles","_this6","sourceInit","items","showSource","handleDocumentClick","showSourceToggle","sourceSlt","idx","isBanner","temps","src","split","sourceFilter","val","sourceDel","_this7","$confirm","confirmButtonText","cancelButtonText","imgSelect","e","imgSource","$el","contains","target","destroyed","views_release","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","gutter","span","_v","placeholder","change","model","value","callback","$$v","expression","_l","label","multiple","filterable","allow-create","default-first-option","readonly","slot","click","$event","stopPropagation","ishljs","codeStyle","scrollStyle","ref","class","folder-images_move","index","alt","directives","rawName","drag","action","before-upload","on-success","size","angle-rotate-box","angle-rotate","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"qJAKMA,YAAWC,QAAIC,UAAUC,UAGlBC,GACNJ,GAAYK,SAASC,iBACjB,SAAUC,EAASC,EAAOC,GAC3BF,GAAWC,GAASC,GACtBF,EAAQD,iBAAiBE,EAAOC,GAAS,IAItC,SAAUF,EAASC,EAAOC,GAC3BF,GAAWC,GAASC,GACtBF,EAAQG,YAAY,KAAOF,EAAOC,IAO7BE,GACNX,GAAYK,SAASO,oBACjB,SAAUL,EAASC,EAAOC,GAC3BF,GAAWC,GACbD,EAAQK,oBAAoBJ,EAAOC,GAAS,IAIzC,SAAUF,EAASC,EAAOC,GAC3BF,GAAWC,GACbD,EAAQM,YAAY,KAAOL,EAAOC,ICwE1C,IAAAK,GACAC,QADA,WAEAC,KAAAC,eACAD,KAAAE,eAEAC,KALA,WAMA,OACAC,WACAC,OAAA,GACAC,WAAA,GACAC,QACAC,cACAC,MAAA,GACAC,SAAA,GACAC,OAAA,GACAC,SAAA,GACAC,WAAA,GACAC,WAAA,KACAC,UAAA,KACAC,QAAA,EACAC,KAAA,MACAC,iBACAC,wBACAC,WAAA,EACAC,QAAA,GACAC,OAAA,KAGAC,SAEAC,gBAFA,WAEA,IAAAC,EAAAzB,KACA0B,EAAA1B,KAAA2B,OAAAC,MAAAF,GACAA,GAAA,iBAAAA,GACA1B,KAAA6B,MAAAC,IAAA,aAAAJ,GAAAK,KAAA,SAAAC,GACA,QAAAC,EAAA,EAAAA,EAAAR,EAAArB,QAAA8B,OAAAD,IACAD,EAAA7B,KAAAgC,WAAAV,EAAArB,QAAA6B,GAAAG,MACAX,EAAApB,OAAAoB,EAAArB,QAAA6B,GAAAxB,MACAgB,EAAAjB,WAAAiB,EAAArB,QAAA6B,GAAA1B,MAGAkB,EAAAlB,KAAAyB,EAAA7B,KAAAI,KACAkB,EAAAhB,MAAAuB,EAAA7B,KAAAM,MACAgB,EAAAf,SAAAsB,EAAA7B,KAAAO,SACAe,EAAAd,OAAAqB,EAAA7B,KAAAQ,OACAc,EAAAb,SAAAoB,EAAA7B,KAAAkC,WAIApC,aApBA,WAoBA,IAAAqC,EAAAtC,KACAA,KAAA6B,MAAAC,IAAA,YAAAC,KAAA,SAAAC,GACAM,EAAAlC,QAAA4B,EAAA7B,KACAmC,EAAAd,qBAGAe,aA1BA,SA0BAb,GACA,IAAAM,EAAAhC,KAAAI,QAAAoC,OAAA,SAAAC,GACA,OAAAA,EAAAL,MAAAV,IAEA1B,KAAAQ,WAAAwB,EAAA,GAAAzB,KACAP,KAAAM,WAAA0B,EAAA,GAAAvB,OAEAiC,YAjCA,WAiCA,IAAAC,EAAA3C,KACA4C,GACAnC,MAAAT,KAAAS,MACAC,SAAAV,KAAAU,SACAyB,SAAAnC,KAAAK,OACAC,WAAAN,KAAAM,WACAC,KAAAP,KAAAO,KACAI,OAAAX,KAAAW,OACA0B,QAAArC,KAAAY,UAEAZ,KAAA6B,MAAAgB,KAAA,YAAAD,GAAAb,KAAA,SAAAC,GACAW,EAAAG,UACA7B,KAAA,UACA8B,QAAA,SAEAJ,EAAAlC,MAAA,GACAkC,EAAAjC,SAAA,GACAiC,EAAAtC,OAAA,GACAsC,EAAArC,WAAA,GACAqC,EAAApC,QACAoC,EAAAhC,OAAA,GACAgC,EAAA/B,SAAA,MAIAoC,cA1DA,WA0DA,IAAAC,EAAAjD,KACA,WAAAkD,EAAAC,EAAA,SAAAC,EAAAC,GACAJ,EAAApB,MAAAC,IAAA,WAAAC,KAAA,SAAAC,GACAoB,EAAApB,EAAA7B,QACAmD,MAAA,SAAAC,GACAF,EAAAE,QAIAC,aAnEA,SAmEAC,GAAA,IAAAC,EAAA1D,KACA,WAAAkD,EAAAC,EAAA,SAAAC,EAAAC,GACAK,EAAAV,gBAAAjB,KAAA,SAAAC,GACA0B,EAAA5C,YACA6C,MAAA3B,EACA4B,IAAAH,EAAAI,KACAC,MAAAL,EAAAI,MAEAE,WAAA,WACAX,GAAA,IACA,UAIAY,cAjFA,SAiFAhC,EAAAyB,GACAQ,QAAAC,IAAAlC,GACAiC,QAAAC,IAAAT,GACAzD,KAAAE,cACAF,KAAAmE,MAAAC,WAAAC,cAEAnE,YAvFA,WAuFA,IAAAoE,EAAAtE,KACAA,KAAA6B,MAAAC,IAAA,YAAAC,KAAA,SAAAC,GACAiC,QAAAC,IAAAlC,GACAsC,EAAAC,aACAD,EAAApD,cAAAoD,EAAAnD,qBAAAa,EAAA7B,KAAAqE,SAGAC,WA9FA,WA+FAzE,KAAAgB,QAAA,EACM5B,EAANC,SAAA,QAAAW,KAAA0E,sBAEAC,iBAlGA,WAmGA3E,KAAAgB,QAAAhB,KAAAgB,OACAhB,KAAAgB,QACAhB,KAAAuE,aACQnF,EAARC,SAAA,QAAAW,KAAA0E,uBAEA1E,KAAAuE,aACQ5E,EAARN,SAAA,QAAAW,KAAA0E,uBAGAH,WA5GA,WA6GAvE,KAAAoB,WAAA,EACApB,KAAAqB,QAAA,GACArB,KAAAsB,OAAA,IAEAsD,UAjHA,SAiHAC,GAEA,GAAA7E,KAAAkB,cAAA2D,GAAAC,SAAA,CACA9E,KAAAoB,UAAAyD,EACA,IAAAE,EAAA/E,KAAAkB,cAAA2D,GAAAG,IAAAC,MAAA,KACAjF,KAAAqB,QAAA0D,IAAA7C,OAAA,GACAlC,KAAAsB,OAAAtB,KAAAkB,cAAA2D,GAAAG,MAEAE,aAzHA,SAyHAC,GACAlB,QAAAC,IAAAiB,GACAnF,KAAAuE,aAEAvE,KAAAkB,cADA,WAAAiE,EACAnF,KAAAkB,cAAAsB,OAAA,SAAAC,GAAA,OAAAA,EAAAqC,WAEA9E,KAAAmB,sBAGAiE,UAlIA,SAkIA3C,GAAA,IAAA4C,EAAArF,KACAiE,QAAAC,IAAAzB,GACAzC,KAAAsF,SAAA,iBACAC,kBAAA,KACAC,iBAAA,KACAvE,KAAA,YACAc,KAAA,WACAsD,EAAAvC,UACA7B,KAAA,UACA8B,QAAA,YAEAO,MAAA,WACA+B,EAAAvC,UACA7B,KAAA,OACA8B,QAAA,aAIA0C,UApJA,WAqJAzF,KAAAW,OAAAX,KAAAsB,OACAtB,KAAA2E,oBAEAD,oBAxJA,SAwJAgB,GACA,IAAA3E,EAAAf,KAAAmE,MAAAwB,UACA3F,KAAA4F,KACA7E,IACAA,EAAA8E,SAAAH,EAAAI,UACA9F,KAAAgB,QAAA,EACAiD,QAAAC,IAAA,GACMvE,EAANN,SAAA,QAAAW,KAAA0E,wBAGAqB,UA9LA,WA+LIpG,EAAJN,SAAA,QAAAW,KAAA0E,uBCvSesB,GADEC,OAFjB,WAA0B,IAAAC,EAAAlG,KAAamG,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,WAAqBE,YAAA,sBAAgCF,EAAA,OAAYE,YAAA,kBAA4BF,EAAA,UAAeG,OAAOC,OAAA,MAAaJ,EAAA,UAAeG,OAAOE,KAAA,KAAUL,EAAA,SAAAH,EAAAS,GAAA,WAAAT,EAAAS,GAAA,KAAAN,EAAA,UAAyDG,OAAOE,KAAA,KAAUL,EAAA,aAAkBG,OAAOI,YAAA,OAAoBxH,IAAKyH,OAAAX,EAAA3D,cAA0BuE,OAAQC,MAAAb,EAAA,OAAAc,SAAA,SAAAC,GAA4Cf,EAAA7F,OAAA4G,GAAeC,WAAA,WAAsBhB,EAAAiB,GAAAjB,EAAA,iBAAAzD,GAAqC,OAAA4D,EAAA,aAAuBzC,IAAAnB,EAAAL,IAAAoE,OAAoBY,MAAA3E,EAAAhC,MAAAsG,MAAAtE,EAAAL,SAAuC,OAAA8D,EAAAS,GAAA,KAAAN,EAAA,UAAkCG,OAAOE,KAAA,KAAUL,EAAA,SAAAH,EAAAS,GAAA,WAAAT,EAAAS,GAAA,KAAAN,EAAA,UAAyDG,OAAOE,KAAA,MAAWL,EAAA,aAAkBG,OAAOa,SAAA,GAAAC,WAAA,GAAAC,eAAA,GAAAC,uBAAA,GAAAZ,YAAA,WAAkGE,OAAQC,MAAAb,EAAA,KAAAc,SAAA,SAAAC,GAA0Cf,EAAA3F,KAAA0G,GAAaC,WAAA,SAAoBhB,EAAAiB,GAAAjB,EAAA,oBAAAzD,GAAwC,OAAA4D,EAAA,aAAuBzC,IAAAnB,EAAA+D,OAAgBY,MAAA3E,EAAAsE,MAAAtE,OAA6B,OAAAyD,EAAAS,GAAA,KAAAN,EAAA,UAAkCG,OAAOE,KAAA,KAAUL,EAAA,SAAAH,EAAAS,GAAA,WAAAT,EAAAS,GAAA,KAAAN,EAAA,UAAyDG,OAAOE,KAAA,MAAWL,EAAA,YAAiBS,OAAOC,MAAAb,EAAA,MAAAc,SAAA,SAAAC,GAA2Cf,EAAAzF,MAAAwG,GAAcC,WAAA,YAAqB,GAAAhB,EAAAS,GAAA,KAAAN,EAAA,UAA+BG,OAAOE,KAAA,KAAUL,EAAA,SAAAH,EAAAS,GAAA,WAAAT,EAAAS,GAAA,KAAAN,EAAA,UAAyDG,OAAOE,KAAA,MAAWL,EAAA,YAAiBG,OAAOvF,KAAA,YAAkB6F,OAAQC,MAAAb,EAAA,SAAAc,SAAA,SAAAC,GAA8Cf,EAAAxF,SAAAuG,GAAiBC,WAAA,eAAwB,OAAAhB,EAAAS,GAAA,KAAAN,EAAA,YAAqCG,OAAOI,YAAA,eAAAa,SAAA,IAA2CX,OAAQC,MAAAb,EAAA,OAAAc,SAAA,SAAAC,GAA4Cf,EAAAvF,OAAAsG,GAAeC,WAAA,YAAsBb,EAAA,aAAkBG,OAAOkB,KAAA,UAAAzG,KAAA,WAAkC7B,IAAKuI,MAAA,SAAAC,GAAkD,OAAzBA,EAAAC,kBAAyB3B,EAAAzB,WAAAmD,KAA+BF,KAAA,YAAgBxB,EAAAS,GAAA,aAAAT,EAAAS,GAAA,KAAAN,EAAA,aAAkDE,YAAA,cAAAC,OAAiCkB,KAAA,UAAgBtI,IAAKuI,MAAA,SAAAC,GAAyBA,EAAAC,kBAAyB3B,EAAAvF,OAAA,KAAiB+G,KAAA,YAAe,OAAAxB,EAAAS,GAAA,KAAAN,EAAA,gBAAyCG,OAAOsB,QAAA,EAAAC,UAAA,QAAAC,aAAA,GAAqDlB,OAAQC,MAAAb,EAAA,SAAAc,SAAA,SAAAC,GAA8Cf,EAAAtF,SAAAqG,GAAiBC,WAAA,cAAwBhB,EAAAS,GAAA,KAAAN,EAAA,OAAwBE,YAAA,gBAA0BF,EAAA,aAAAA,EAAA,KAA0BE,YAAA,sBAAgCL,EAAAS,GAAA,WAAAT,EAAAS,GAAA,KAAAN,EAAA,aAAgDG,OAAOvF,KAAA,WAAiB7B,IAAKuI,MAAAzB,EAAAxD,eAAyB2D,EAAA,KAAUE,YAAA,eAAyBL,EAAAS,GAAA,YAAAT,EAAAS,GAAA,KAAAN,EAAA,OAA2C4B,IAAA,YAAA1B,YAAA,gBAAA2B,OAAmDC,qBAAAjC,EAAAlF,UAAkCqF,EAAA,OAAYE,YAAA,wBAAkCL,EAAAS,GAAA,UAAAT,EAAAS,GAAA,KAAAN,EAAA,OAAyCE,YAAA,wBAAkCF,EAAA,kBAAuBjH,IAAIyH,OAAAX,EAAAhB,cAA0B4B,OAAQC,MAAAb,EAAA,KAAAc,SAAA,SAAAC,GAA0Cf,EAAAjF,KAAAgG,GAAaC,WAAA,UAAoBb,EAAA,YAAiBG,OAAOY,MAAA,SAAelB,EAAAS,GAAA,QAAAT,EAAAS,GAAA,KAAAN,EAAA,YAA4CG,OAAOY,MAAA,YAAkBlB,EAAAS,GAAA,gBAAAT,EAAAS,GAAA,KAAAN,EAAA,OAA+CE,YAAA,mCAA6CF,EAAA,SAAAH,EAAAiB,GAAAjB,EAAA,uBAAAzD,EAAA2F,GAA8D,OAAA/B,EAAA,UAAoBzC,IAAAwE,EAAA5B,OAAiBE,KAAA,MAAWL,EAAA,OAAYE,YAAA,sBAAAnH,IAAsCuI,MAAA,SAAAC,GAAyB1B,EAAAtB,UAAAwD,OAAuB/B,EAAA,KAAUE,YAAA,wCAAAnH,IAAwDuI,MAAA,SAAAC,GAAyBA,EAAAC,kBAAyB3B,EAAAd,UAAA3C,OAAsByD,EAAAS,GAAA,KAAAN,EAAA,OAAwBG,OAAOxB,IAAAvC,EAAAuC,IAAAqD,IAAA,MAAyBnC,EAAAS,GAAA,KAAAN,EAAA,OAAwBiC,aAAazE,KAAA,OAAA0E,QAAA,SAAAxB,MAAAb,EAAA9E,WAAAgH,EAAAlB,WAAA,uBAA4FX,YAAA,gCAA4CF,EAAA,KAAUE,YAAA,iCAA2C,GAAAL,EAAAS,GAAA,KAAAN,EAAA,aAAiC4B,IAAA,aAAAzB,OAAwBgC,KAAA,GAAAC,OAAA,2BAAAtI,KAAA+F,EAAApF,WAAA4H,gBAAAxC,EAAA1C,aAAAmF,aAAAzC,EAAAlC,cAAAqD,SAAA,MAAmJhB,EAAA,KAAUE,YAAA,mBAA6BL,EAAAS,GAAA,KAAAN,EAAA,OAAwBE,YAAA,oBAA8BL,EAAAS,GAAA,aAAAN,EAAA,MAAAH,EAAAS,GAAA,kBAAAT,EAAAS,GAAA,KAAAN,EAAA,OAA8EE,YAAA,yBAAmCF,EAAA,UAAAA,EAAA,UAA4BG,OAAOE,KAAA,MAAWL,EAAA,YAAiBG,OAAOoC,KAAA,OAAAhC,YAAA,MAAAa,SAAA,IAAgDX,OAAQC,MAAAb,EAAA,QAAAc,SAAA,SAAAC,GAA6Cf,EAAA7E,QAAA4F,GAAgBC,WAAA,cAAuB,GAAAhB,EAAAS,GAAA,KAAAN,EAAA,UAA+BG,OAAOE,KAAA,MAAWL,EAAA,YAAiBG,OAAOoC,KAAA,OAAAhC,YAAA,OAAAa,SAAA,IAAiDX,OAAQC,MAAAb,EAAA,OAAAc,SAAA,SAAAC,GAA4Cf,EAAA5E,OAAA2F,GAAeC,WAAA,aAAsB,OAAAhB,EAAAS,GAAA,KAAAN,EAAA,aAAsCE,YAAA,2BAAAC,OAA8CvF,KAAA,UAAA2H,KAAA,SAAgCxJ,IAAKuI,MAAAzB,EAAAT,aAAuBS,EAAAS,GAAA,gBAAAT,EAAAS,GAAA,KAAAN,EAAA,OAA+CE,YAAA,uBAAAnH,IAAuCuI,MAAA,SAAAC,GAAkD,OAAzBA,EAAAC,kBAAyB3B,EAAAvB,iBAAAiD,OAAsCvB,EAAA,OAAY6B,OAAOW,mBAAA3C,EAAAlF,UAAgCqF,EAAA,KAAUE,YAAA,mBAAA2B,OAAsCY,eAAA5C,EAAAlF,iBAA4B,IAE32J+H,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACEpJ,EACAkG,GATF,EAVA,SAAAmD,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/3.92219a278a85a7db4a26.js","sourcesContent":["/* eslint-disable */\n/* istanbul ignore next */\n\nimport Vue from 'vue'\n\nconst isServer = Vue.prototype.$isServer\n\n/* istanbul ignore next */\nexport const on = (function () {\n  if (!isServer && document.addEventListener) {\n    return function (element, event, handler) {\n      if (element && event && handler) {\n        element.addEventListener(event, handler, false)\n      }\n    }\n  } else {\n    return function (element, event, handler) {\n      if (element && event && handler) {\n        element.attachEvent('on' + event, handler)\n      }\n    }\n  }\n})()\n\n/* istanbul ignore next */\nexport const off = (function () {\n  if (!isServer && document.removeEventListener) {\n    return function (element, event, handler) {\n      if (element && event) {\n        element.removeEventListener(event, handler, false)\n      }\n    }\n  } else {\n    return function (element, event, handler) {\n      if (element && event) {\n        element.detachEvent('on' + event, handler)\n      }\n    }\n  }\n})()\n\n/* istanbul ignore next */\nexport const once = function (el, event, fn) {\n  var listener = function () {\n    if (fn) {\n      fn.apply(this, arguments)\n    }\n    off(el, event, listener)\n  }\n  on(el, event, listener)\n}\n\n/* istanbul ignore next */\nexport function hasClass (el, cls) {\n  if (!el || !cls) return false\n  if (cls.indexOf(' ') !== -1) throw new Error('className should not contain space.')\n  if (el.classList) {\n    return el.classList.contains(cls)\n  } else {\n    return (' ' + el.className + ' ').indexOf(' ' + cls + ' ') > -1\n  }\n}\n\n/* istanbul ignore next */\nexport function addClass (el, cls) {\n  if (!el) return\n  var curClass = el.className\n  var classes = (cls || '').split(' ')\n\n  for (var i = 0, j = classes.length; i < j; i++) {\n    var clsName = classes[i]\n    if (!clsName) continue\n\n    if (el.classList) {\n      el.classList.add(clsName)\n    } else if (!hasClass(el, clsName)) {\n      curClass += ' ' + clsName\n    }\n  }\n  if (!el.classList) {\n    el.className = curClass\n  }\n};\n\n/* istanbul ignore next */\nexport function removeClass (el, cls) {\n  if (!el || !cls) return\n  var classes = cls.split(' ')\n  var curClass = ' ' + el.className + ' '\n\n  for (var i = 0, j = classes.length; i < j; i++) {\n    var clsName = classes[i]\n    if (!clsName) continue\n\n    if (el.classList) {\n      el.classList.remove(clsName)\n    } else if (hasClass(el, clsName)) {\n      curClass = curClass.replace(' ' + clsName + ' ', ' ')\n    }\n  }\n  if (!el.classList) {\n    el.className = trim(curClass)\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/dom.js","<template>\n  <section class=\"release-container\">\n    <div class=\"release-items\">\n      <el-row :gutter=\"20\">\n        <el-col :span=\"2\"><label>栏目：</label></el-col>\n        <el-col :span=\"8\">\n          <el-select v-model=\"column\" placeholder=\"请选择\" @change=\"handleSelect\">\n            <el-option\n              v-for=\"item in columns\"\n              :key=\"item._id\"\n              :label=\"item.title\"\n              :value=\"item._id\">\n            </el-option>\n          </el-select>\n        </el-col>\n        <el-col :span=\"2\"><label>标签：</label></el-col>\n        <el-col :span=\"12\">\n          <el-select\n          v-model=\"tags\"\n          multiple\n          filterable\n          allow-create\n          default-first-option\n          placeholder=\"请选择文章标签\">\n            <el-option\n              v-for=\"item in tagOptions\"\n              :key=\"item\"\n              :label=\"item\"\n              :value=\"item\">\n            </el-option>\n          </el-select>\n        </el-col>\n        <el-col :span=\"2\"><label>标题：</label></el-col>\n        <el-col :span=\"22\">\n          <el-input v-model=\"title\"></el-input>\n        </el-col>\n        <el-col :span=\"2\"><label>摘要：</label></el-col>\n        <el-col :span=\"22\">\n          <el-input type=\"textarea\" v-model=\"abstract\"></el-input>\n        </el-col>\n      </el-row>\n      <el-input v-model=\"banner\" placeholder=\"光秃秃去给人看，你愿意么\" readonly>\n        <el-button slot=\"prepend\" type=\"primary\" @click.stop=\"showSource\">来一张封面图？</el-button>\n        <el-button slot=\"append\" class=\"fa fa-close\" @click.stop=\"banner = ''\"></el-button>\n      </el-input>\n    </div>\n    <mavon-editor v-model=\"markdown\" :ishljs=\"true\" codeStyle=\"xcode\" :scrollStyle=\"true\"/>\n    <div class=\"release-btn\">\n      <el-button><i class=\"fa fa-folder-open\"></i>存入草稿箱</el-button>\n      <el-button type=\"primary\" @click=\"sendArticle\"><i class=\"fa fa-send\"></i>发表</el-button>\n    </div>\n    <div class=\"folder-images\" ref=\"imgSource\" :class=\"{'folder-images_move': moveIn}\">\n      <div class=\"folder-images_title\">图片素材</div>\n      <div class=\"folder-images_types\">\n        <el-radio-group v-model=\"type\" @change=\"sourceFilter\">\n          <el-radio label=\"all\">全部</el-radio>\n          <el-radio label=\"banner\">封面</el-radio>\n        </el-radio-group>\n      </div>\n      <div class=\"folder-images_list area-scroll\">\n        <el-row>\n          <el-col\n          :span=\"24\"\n          v-for=\"(item, index) in images_source\"\n          :key=\"index\"\n          >\n            <div class=\"folder-images_items\" @click=\"sourceSlt(index)\">\n              <i class=\"fa fa-close folder-images_items_close\" @click.stop=\"sourceDel(item)\"></i>\n              <img :src=\"item.src\" alt=\"\">\n              <div class=\"folder-images_item_selected\" v-show=\"sourceIdx == index\"><i class=\"fa fa-check-circle-o\"></i></div>\n            </div>\n          </el-col>\n        </el-row>\n        <el-upload\n          ref=\"uploadForm\"\n          drag\n          action=\"http://upload.qiniup.com\"\n          :data=\"uploadData\"\n          :before-upload=\"beforeUpload\"\n          :on-success=\"successUpload\"\n          multiple>\n          <i class=\"el-icon-upload\"></i>\n          <div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\n        </el-upload>\n      </div>\n      <div class=\"folder-images_source\">\n        <el-row>\n          <el-col :span=\"24\">\n            <el-input v-model=\"imgName\" size=\"mini\" placeholder=\"图片名\" readonly></el-input>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-input v-model=\"imgSrc\" size=\"mini\" placeholder=\"线上地址\" readonly></el-input>\n          </el-col>\n        </el-row>\n        <el-button type=\"primary\" size=\"small\" class=\"folder-images_source_btn\" @click=\"imgSelect\">就决定是你了</el-button>\n      </div>\n      <div class=\"folder-images_toggle\" @click.stop=\"showSourceToggle\">\n        <div :class=\"{'angle-rotate-box': moveIn}\">\n          <i class=\"fa fa-angle-left\" :class=\"{'angle-rotate': moveIn}\"></i>\n        </div>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script>\nimport { on, off } from '@/utils/dom'\nexport default {\n  mounted () {\n    this.fetchColumns()\n    this.fetchSource()\n  },\n  data () {\n    return {\n      columns: [],\n      column: '',\n      columnName: '',\n      tags: [],\n      tagOptions: [],\n      title: '',\n      abstract: '',\n      banner: '',\n      markdown: '',\n      qiniuToken: '',\n      uploadData: null,\n      reference: null,\n      moveIn: false,\n      type: 'all',\n      images_source: [],\n      images_source_backup: [],\n      sourceIdx: -1,\n      imgName: '',\n      imgSrc: ''\n    }\n  },\n  methods: {\n    // 判断是编辑还是发布\n    checkEditStatus () {\n      let id = this.$route.query.id\n      if (id && typeof id === 'string') {\n        this.$http.get(`/articles/${id}`).then(res => {\n          for (let i = 0; i < this.columns.length; i++) {\n            if (res.data.columnId === this.columns[i]._id) {\n              this.column = this.columns[i].title\n              this.tagOptions = this.columns[i].tags\n            }\n          }\n          this.tags = res.data.tags\n          this.title = res.data.title\n          this.abstract = res.data.abstract\n          this.banner = res.data.banner\n          this.markdown = res.data.content\n        })\n      }\n    },\n    fetchColumns () {\n      this.$http.get('/columns').then(res => {\n        this.columns = res.data\n        this.checkEditStatus()\n      })\n    },\n    handleSelect (id) {\n      let res = this.columns.filter((item) => {\n        return item._id === id\n      })\n      this.tagOptions = res[0].tags\n      this.columnName = res[0].title\n    },\n    sendArticle () {\n      let normalizeData = {\n        title: this.title,\n        abstract: this.abstract,\n        columnId: this.column,\n        columnName: this.columnName,\n        tags: this.tags,\n        banner: this.banner,\n        content: this.markdown\n      }\n      this.$http.post('/articles', normalizeData).then(res => {\n        this.$message({\n          type: 'success',\n          message: '发表成功'\n        })\n        this.title = ''\n        this.abstract = ''\n        this.column = ''\n        this.columnName = ''\n        this.tags = []\n        this.banner = ''\n        this.markdown = ''\n      })\n    },\n    // 素材上传操作\n    getQiniuToken () {\n      return new Promise((resolve, reject) => {\n        this.$http.get('/upload').then(res => {\n          resolve(res.data)\n        }).catch(err => {\n          reject(err)\n        })\n      })\n    },\n    beforeUpload (file) {\n      return new Promise((resolve, reject) => {\n        this.getQiniuToken().then(res => {\n          this.uploadData = {\n            token: res,\n            key: file.name,\n            fname: file.name\n          }\n          setTimeout(() => {\n            resolve(true)\n          }, 200)\n        })\n      })\n    },\n    successUpload (res, file) {\n      console.log(res)\n      console.log(file)\n      this.fetchSource()\n      this.$refs.uploadForm.clearFiles()\n    },\n    fetchSource () {\n      this.$http.get('/uploads').then(res => {\n        console.log(res)\n        this.sourceInit()\n        this.images_source = this.images_source_backup = res.data.items\n      })\n    },\n    showSource () {\n      this.moveIn = true\n      on(document, 'click', this.handleDocumentClick)\n    },\n    showSourceToggle () {\n      this.moveIn = !this.moveIn\n      if (this.moveIn) {\n        this.sourceInit()\n        on(document, 'click', this.handleDocumentClick)\n      } else {\n        this.sourceInit()\n        off(document, 'click', this.handleDocumentClick)\n      }\n    },\n    sourceInit () {\n      this.sourceIdx = -1\n      this.imgName = ''\n      this.imgSrc = ''\n    },\n    sourceSlt (idx) {\n      // 判断所选图片是否可作为banner\n      if (!this.images_source[idx].isBanner) return\n      this.sourceIdx = idx\n      let temps = this.images_source[idx].src.split('/')\n      this.imgName = temps[temps.length - 1]\n      this.imgSrc = this.images_source[idx].src\n    },\n    sourceFilter (val) {\n      console.log(val)\n      this.sourceInit()\n      if (val === 'banner') {\n        this.images_source = this.images_source.filter(item => item.isBanner)\n      } else {\n        this.images_source = this.images_source_backup\n      }\n    },\n    sourceDel (item) {\n      console.log(item)\n      this.$confirm('确定删除该素材?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.$message({\n          type: 'success',\n          message: '删除成功!'\n        })\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '已取消删除'\n        })\n      })\n    },\n    imgSelect () {\n      this.banner = this.imgSrc\n      this.showSourceToggle()\n    },\n    handleDocumentClick (e) {\n      let reference = this.$refs.imgSource\n      if (!this.$el ||\n        !reference ||\n        reference.contains(e.target)) return\n      this.moveIn = false\n      console.log(1)\n      off(document, 'click', this.handleDocumentClick)\n    }\n  },\n  destroyed () {\n    off(document, 'click', this.handleDocumentClick)\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../../styles/default.scss';\n.el-col{\n  margin-bottom: 10px;\n}\n.release-items{\n  margin-bottom: 20px;\n}\n.el-autocomplete,\n.el-select{\n  width: 100%;\n}\n.release-btn{\n  margin-top: 20px;\n  text-align: right;\n  i{\n    margin-right: 5px;\n  }\n}\n.folder-images{\n  position: fixed;\n  top: 0;\n  right: -300px;\n  bottom: 0;\n  z-index: 1600;\n  width: 300px;\n  background: #ffffff;\n  border-left: 1px solid #ebebeb;\n  transition: .5s;\n}\n.folder-images_move{\n  right: 0;\n}\n.folder-images_title{\n  padding-left: 10px;\n  height: 40px;\n  line-height: 40px;\n  border-bottom: 1px dashed #ebebeb;\n}\n.folder-images_types{\n  padding-left: 10px;\n  height: 22px;\n}\n.folder-images_list{\n  position: absolute;\n  top: 65px;\n  bottom: 130px;\n  padding-top: 10px;\n  width: 100%;\n  overflow: auto;\n}\n// .folder-images_list::-webkit-scrollbar {\n//   width: 6px;\n//   height: 1px;\n// }\n// .folder-images_list::-webkit-scrollbar-thumb {/*滚动条里面小方块*/\n//   border-radius: 6px;\n//   background: #ccc;\n// }\n// .folder-images_list::-webkit-scrollbar-track {/*滚动条里面轨道*/\n//   border-radius: 6px;\n//   background: #fff;\n// }\n.folder-images_items{\n  position: relative;\n  // width: 100%;\n  margin: 0 10px;\n  // min-height: 100px;\n  border: 1px solid #ebebeb;\n  border-radius: 4px;\n  // overflow: hidden;\n  cursor: pointer;\n  img{\n    width: 100%;\n    vertical-align: middle;\n  }\n}\n.folder-images_items:hover .folder-images_items_close{\n  visibility: visible;\n}\n.folder-images_items_close{\n  visibility: hidden;\n  position: absolute;\n  top: 0;\n  left: 2px;\n  z-index: 2;\n  color: #ec4444;\n}\n.folder-images_item_selected{\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 1;\n  background: rgba(101, 101, 101, .1);\n  i{\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    font-size: 40px;\n    color: $default_color;\n  }\n}\n.folder-images_source{\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  padding: 10px;\n  height: 110px;\n  background: #ffffff;\n  border-top: 1px solid #ebebeb;\n}\n\n.folder-images_source_btn{\n  width: 100%;\n}\n.folder-images_toggle{\n  position: absolute;\n  top: 50%;\n  left: -22px;\n  transform: translateY(-50%);\n  width: 20px;\n  height: 40px;\n  border-top: 1px solid #ebebeb;\n  border-right: 1px solid #ffffff;\n  border-bottom: 1px solid #ebebeb;\n  border-left: 1px solid #ebebeb;\n  border-radius: 50px 0px 0 50px;\n  background: #ffffff;\n  line-height: 38px;\n  font-size: 30px;\n  color: #999;\n  div{\n    margin-left: 5px;\n  }\n  i{\n    transition: .5s;\n  }\n}\n.angle-rotate-box{\n  margin-left: 9px !important;\n}\n.angle-rotate{\n  transform: rotate(180deg);\n  transform-origin: 50% 50%;\n  margin-top: 6px;\n}\n.folder-images_toggle:hover{\n  color: $default_color;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/release/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"release-container\"},[_c('div',{staticClass:\"release-items\"},[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":2}},[_c('label',[_vm._v(\"栏目：\")])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":8}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},on:{\"change\":_vm.handleSelect},model:{value:(_vm.column),callback:function ($$v) {_vm.column=$$v},expression:\"column\"}},_vm._l((_vm.columns),function(item){return _c('el-option',{key:item._id,attrs:{\"label\":item.title,\"value\":item._id}})}),1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":2}},[_c('label',[_vm._v(\"标签：\")])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":12}},[_c('el-select',{attrs:{\"multiple\":\"\",\"filterable\":\"\",\"allow-create\":\"\",\"default-first-option\":\"\",\"placeholder\":\"请选择文章标签\"},model:{value:(_vm.tags),callback:function ($$v) {_vm.tags=$$v},expression:\"tags\"}},_vm._l((_vm.tagOptions),function(item){return _c('el-option',{key:item,attrs:{\"label\":item,\"value\":item}})}),1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":2}},[_c('label',[_vm._v(\"标题：\")])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":22}},[_c('el-input',{model:{value:(_vm.title),callback:function ($$v) {_vm.title=$$v},expression:\"title\"}})],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":2}},[_c('label',[_vm._v(\"摘要：\")])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":22}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.abstract),callback:function ($$v) {_vm.abstract=$$v},expression:\"abstract\"}})],1)],1),_vm._v(\" \"),_c('el-input',{attrs:{\"placeholder\":\"光秃秃去给人看，你愿意么\",\"readonly\":\"\"},model:{value:(_vm.banner),callback:function ($$v) {_vm.banner=$$v},expression:\"banner\"}},[_c('el-button',{attrs:{\"slot\":\"prepend\",\"type\":\"primary\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.showSource($event)}},slot:\"prepend\"},[_vm._v(\"来一张封面图？\")]),_vm._v(\" \"),_c('el-button',{staticClass:\"fa fa-close\",attrs:{\"slot\":\"append\"},on:{\"click\":function($event){$event.stopPropagation();_vm.banner = ''}},slot:\"append\"})],1)],1),_vm._v(\" \"),_c('mavon-editor',{attrs:{\"ishljs\":true,\"codeStyle\":\"xcode\",\"scrollStyle\":true},model:{value:(_vm.markdown),callback:function ($$v) {_vm.markdown=$$v},expression:\"markdown\"}}),_vm._v(\" \"),_c('div',{staticClass:\"release-btn\"},[_c('el-button',[_c('i',{staticClass:\"fa fa-folder-open\"}),_vm._v(\"存入草稿箱\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.sendArticle}},[_c('i',{staticClass:\"fa fa-send\"}),_vm._v(\"发表\")])],1),_vm._v(\" \"),_c('div',{ref:\"imgSource\",staticClass:\"folder-images\",class:{'folder-images_move': _vm.moveIn}},[_c('div',{staticClass:\"folder-images_title\"},[_vm._v(\"图片素材\")]),_vm._v(\" \"),_c('div',{staticClass:\"folder-images_types\"},[_c('el-radio-group',{on:{\"change\":_vm.sourceFilter},model:{value:(_vm.type),callback:function ($$v) {_vm.type=$$v},expression:\"type\"}},[_c('el-radio',{attrs:{\"label\":\"all\"}},[_vm._v(\"全部\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":\"banner\"}},[_vm._v(\"封面\")])],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"folder-images_list area-scroll\"},[_c('el-row',_vm._l((_vm.images_source),function(item,index){return _c('el-col',{key:index,attrs:{\"span\":24}},[_c('div',{staticClass:\"folder-images_items\",on:{\"click\":function($event){_vm.sourceSlt(index)}}},[_c('i',{staticClass:\"fa fa-close folder-images_items_close\",on:{\"click\":function($event){$event.stopPropagation();_vm.sourceDel(item)}}}),_vm._v(\" \"),_c('img',{attrs:{\"src\":item.src,\"alt\":\"\"}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.sourceIdx == index),expression:\"sourceIdx == index\"}],staticClass:\"folder-images_item_selected\"},[_c('i',{staticClass:\"fa fa-check-circle-o\"})])])])}),1),_vm._v(\" \"),_c('el-upload',{ref:\"uploadForm\",attrs:{\"drag\":\"\",\"action\":\"http://upload.qiniup.com\",\"data\":_vm.uploadData,\"before-upload\":_vm.beforeUpload,\"on-success\":_vm.successUpload,\"multiple\":\"\"}},[_c('i',{staticClass:\"el-icon-upload\"}),_vm._v(\" \"),_c('div',{staticClass:\"el-upload__text\"},[_vm._v(\"将文件拖到此处，或\"),_c('em',[_vm._v(\"点击上传\")])])])],1),_vm._v(\" \"),_c('div',{staticClass:\"folder-images_source\"},[_c('el-row',[_c('el-col',{attrs:{\"span\":24}},[_c('el-input',{attrs:{\"size\":\"mini\",\"placeholder\":\"图片名\",\"readonly\":\"\"},model:{value:(_vm.imgName),callback:function ($$v) {_vm.imgName=$$v},expression:\"imgName\"}})],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":24}},[_c('el-input',{attrs:{\"size\":\"mini\",\"placeholder\":\"线上地址\",\"readonly\":\"\"},model:{value:(_vm.imgSrc),callback:function ($$v) {_vm.imgSrc=$$v},expression:\"imgSrc\"}})],1)],1),_vm._v(\" \"),_c('el-button',{staticClass:\"folder-images_source_btn\",attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.imgSelect}},[_vm._v(\"就决定是你了\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"folder-images_toggle\",on:{\"click\":function($event){$event.stopPropagation();return _vm.showSourceToggle($event)}}},[_c('div',{class:{'angle-rotate-box': _vm.moveIn}},[_c('i',{staticClass:\"fa fa-angle-left\",class:{'angle-rotate': _vm.moveIn}})])])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-19adaab7\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/release/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-19adaab7\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-19adaab7\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-19adaab7\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/release/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}